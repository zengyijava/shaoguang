CREATE PROCEDURE "DELPROC"(IN "PROCNAME1" VARCHAR(20)) 
  begin
DECLARE STR VARCHAR (256);
DECLARE STR1 VARCHAR (256);
SELECT PROCNAME INTO STR1 FROM SYSCAT.PROCEDURES WHERE  PROCNAME=PROCNAME1;
if  STR1 is not null THEN
  SET STR ='DROP PROCEDURE '||PROCNAME1; 
  execute immediate str ; 
end if;   
end;      

CALL DELPROC('LL_ORDER_TASK');
CREATE PROCEDURE LL_ORDER_TASK()
BEGIN
DECLARE PISQL VARCHAR(6000);
DECLARE PISQL_1 VARCHAR(256);
IF NOT EXISTS (SELECT * FROM SYSIBM.SYSTABLES WHERE TID <> 0 AND NAME = 'LL_ORDER_TASK') THEN
SET PISQL ='CREATE TABLE "LL_ORDER_TASK"(
	ID INTEGER         NOT NULL  GENERATED BY DEFAULT
    AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20, MINVALUE 1, MAXVALUE 2147483647, NO CYCLE, NO ORDER),
	TASKID BIGINT DEFAULT 0 NOT NULL,	 			
	ECID INT DEFAULT 0 NOT NULL,				
	USER_ID INT DEFAULT 0	NOT NULL,				
	ORG_ID INT DEFAULT 0	NOT NULL,
	TOPIC VARCHAR(64) DEFAULT '''' NOT NULL,	
	PRO_IDS VARCHAR(32) DEFAULT '''' NOT NULL,	
	MSGTYPE CHAR(1) DEFAULT 1	NOT NULL,				
	TEMP_ID INT DEFAULT 0	NOT NULL,				
	SP_USER VARCHAR(32) DEFAULT '''' NOT NULL,
	SP_PWD VARCHAR(32) DEFAULT '''' NOT NULL,
	SUBCOUNT INT DEFAULT 0	NOT NULL,
	EFFCOUNT INT DEFAULT 0	NOT NULL,
	SUCCOUNT INT DEFAULT 0	NOT NULL,
	FAICOUNT INT DEFAULT 0	NOT NULL,
	TIMER_STATUS CHAR(1) DEFAULT 0	NOT NULL,	
	TIMER_TIME TIMESTAMP NOT NULL WITH DEFAULT ''1900-1-1 00:00:00'' ,	
	RE_STATUS CHAR(1) DEFAULT 0	NOT NULL,	
	ORDERSTATUS VARCHAR(2) DEFAULT ''0''	NOT NULL,	
	SMSSTATUS VARCHAR(2) DEFAULT ''0''	NOT NULL,	
	ISRETRY CHAR(1) DEFAULT 0	NOT NULL,	
	SUBMITTM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	ORDERTM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	UPDATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	CREATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,
	SUMMONEY NUMERIC(10,2) DEFAULT 0.00 NOT NULL,	
	ORDERNO VARCHAR(64) DEFAULT '''' NOT NULL,
	REPORTDATE VARCHAR(16) DEFAULT '''' NOT NULL,
	MSG VARCHAR(2048) DEFAULT '''' NOT NULL,
    P_IDS VARCHAR(64) DEFAULT '''' NOT NULL,
	SERVERNUM VARCHAR(32) DEFAULT ''0'' NOT NULL
) IN EMP_TABLESPACE';
EXECUTE IMMEDIATE PISQL;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_TASK_USER_ID ON LL_ORDER_TASK(USER_ID)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_TASK_ORDERTM ON LL_ORDER_TASK(ORDERTM)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_TASK_ORG_ID ON LL_ORDER_TASK(ORG_ID)';
EXECUTE IMMEDIATE PISQL_1;

END IF;
END;   

CALL LL_ORDER_TASK();
CALL DELPROC('LL_ORDER_TASK');


--select * from LL_PRODUCT;

CALL DELPROC('LL_PRODUCT');
CREATE PROCEDURE LL_PRODUCT()
BEGIN
DECLARE PISQL VARCHAR(6000);
DECLARE PISQL_1 VARCHAR(256);
IF NOT EXISTS (SELECT * FROM SYSIBM.SYSTABLES WHERE TID <> 0 AND NAME = 'LL_PRODUCT') THEN
SET PISQL ='CREATE TABLE "LL_PRODUCT"(
	ID INTEGER NOT NULL  GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20, MINVALUE 1, MAXVALUE 2147483647, NO CYCLE, NO ORDER),
	ECID INT DEFAULT 0 NOT NULL,				
	PRODUCTID VARCHAR(32) DEFAULT '''' NOT NULL,	
	PRODUCTNAME VARCHAR(128) DEFAULT '''' NOT NULL,	
	ISP VARCHAR(16) DEFAULT '''' NOT NULL,	
	VOLUME VARCHAR(16) DEFAULT '''' NOT NULL,
	PRICE NUMERIC(10,1) DEFAULT 0.0 NOT NULL,	
	DISCPRICE NUMERIC(10,1) DEFAULT 0.0 NOT NULL,				
	AREA VARCHAR(32) DEFAULT '''' NOT NULL,
	PTYPE INT DEFAULT 0	NOT NULL,
	PMOLD INT DEFAULT -1 NOT NULL,
	RTYPE INT DEFAULT -1 NOT NULL,
	STATUS INT DEFAULT 0	NOT NULL,		
	UPDATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	CREATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,
	OPERATORID INT DEFAULT 0 NOT NULL
) IN EMP_TABLESPACE';
EXECUTE IMMEDIATE PISQL;

SET PISQL_1 = 'CREATE INDEX IDX_LL_PRODUCT_PRODUCTID ON LL_PRODUCT(PRODUCTID)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_PRODUCT_PRODUCTNAME ON LL_PRODUCT(PRODUCTNAME)';
EXECUTE IMMEDIATE PISQL_1;

END IF;
END;

CALL LL_PRODUCT();
CALL DELPROC('LL_PRODUCT');


CALL DELPROC('LL_COMP_INFO');
CREATE PROCEDURE LL_COMP_INFO()
BEGIN
DECLARE PISQL VARCHAR(6000);
DECLARE PISQL_1 VARCHAR(256);
IF NOT EXISTS (SELECT * FROM SYSIBM.SYSTABLES WHERE TID <> 0 AND NAME = 'LL_COMP_INFO') THEN
SET PISQL ='CREATE TABLE "LL_COMP_INFO"(
	ID INTEGER NOT NULL  GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20, MINVALUE 1, MAXVALUE 2147483647, NO CYCLE, NO ORDER),			
	LLACCOUNT VARCHAR(16) DEFAULT '''' NOT NULL,	
	PASSWORD VARCHAR(64) DEFAULT '''' NOT NULL,
	ECID INT DEFAULT 0 NOT NULL,	
	ECNAME VARCHAR(32) DEFAULT '''' NOT NULL,	
	IP VARCHAR(24) DEFAULT '''' NOT NULL,
	PORT INT DEFAULT 0 NOT NULL,
	REMARK VARCHAR(1024) DEFAULT '''' NOT NULL,
	UPDATETM VARCHAR(32) DEFAULT '''' NOT NULL,
	CREATETM VARCHAR(32) DEFAULT '''' NOT NULL,
	CREATEID INT DEFAULT 0	NOT NULL,			
	UPDATEID INT DEFAULT 0	NOT NULL,
	PUSHADDR VARCHAR(128) DEFAULT '''' NOT NULL
) IN EMP_TABLESPACE';

EXECUTE IMMEDIATE PISQL;

END IF;
END;

CALL LL_COMP_INFO();
CALL DELPROC('LL_COMP_INFO');


CALL DELPROC('LL_ORDER_DETAIL2018');
CREATE PROCEDURE LL_ORDER_DETAIL2018()
BEGIN
DECLARE PISQL VARCHAR(6000);
DECLARE PISQL_1 VARCHAR(256);
IF NOT EXISTS (SELECT * FROM SYSIBM.SYSTABLES WHERE TID <> 0 AND NAME = 'LL_ORDER_DETAIL2018') THEN
SET PISQL ='CREATE TABLE "LL_ORDER_DETAIL2018"(
	ID INTEGER NOT NULL  GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20, MINVALUE 1, MAXVALUE 2147483647, NO CYCLE, NO ORDER),	 							
	MOBILE VARCHAR(16) DEFAULT '''' NOT NULL,	
	MSG VARCHAR(2048) DEFAULT '''' NOT NULL,	
	BATCHID INT DEFAULT 0	NOT NULL,
	ORDERNO VARCHAR(64) DEFAULT '''' NOT NULL,	
	LLRPT VARCHAR(16) DEFAULT '''' NOT NULL,
	USER_ID INT DEFAULT 0 NOT NULL,
	ORG_ID INT DEFAULT 0 NOT NULL,
	PRO_ID INT DEFAULT 0 NOT NULL,
	PRODUCTID VARCHAR(32) DEFAULT '''' NOT NULL,
	ORDERTM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	RPTTM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	UPDATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	CREATETM TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP ,	
	STATUS INT DEFAULT 0 NOT NULL,			
	ERRCODE VARCHAR(20) DEFAULT '''' NOT NULL,
	REPORTDATE VARCHAR(16) DEFAULT '''' NOT NULL
) IN EMP_TABLESPACE';


EXECUTE IMMEDIATE PISQL;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_MOBILE ON LL_ORDER_DETAIL2018(MOBILE)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_ORDERNO ON LL_ORDER_DETAIL2018(ORDERNO)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_USER_ID ON LL_ORDER_DETAIL2018(USER_ID)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_ORG_ID ON LL_ORDER_DETAIL2018(ORG_ID)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_PRO_ID ON LL_ORDER_DETAIL2018(PRO_ID)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_REPORTDATE ON LL_ORDER_DETAIL2018(REPORTDATE)';
EXECUTE IMMEDIATE PISQL_1;

SET PISQL_1 = 'CREATE INDEX IDX_LL_ORDER_DETAIL2018_LLRPT ON LL_ORDER_DETAIL2018(LLRPT)';
EXECUTE IMMEDIATE PISQL_1;

END IF;
END;

CALL LL_ORDER_DETAIL2018();
CALL DELPROC('LL_ORDER_DETAIL2018');


CALL DELPROC('LL_STATUSRPT');
CREATE PROCEDURE LL_STATUSRPT()
BEGIN
DECLARE PISQL VARCHAR(6000);
DECLARE PISQL_1 VARCHAR(256);
IF NOT EXISTS (SELECT * FROM SYSIBM.SYSTABLES WHERE TID <> 0 AND NAME = 'LL_STATUSRPT') THEN
SET PISQL ='CREATE TABLE "LL_STATUSRPT"
    (
        ID INTEGER NOT NULL  GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1, CACHE 20, MINVALUE 1, MAXVALUE 2147483647, NO CYCLE, NO ORDER),
        MOBILE  VARCHAR(16) DEFAULT '''' NOT NULL,           
        PRODUCTID  VARCHAR(32) DEFAULT '''' NOT NULL,
        LLRPT      VARCHAR(2) DEFAULT '''' NOT NULL,
        ORDERTM    VARCHAR(16) DEFAULT '''' NOT NULL,
        ERRCODE    VARCHAR(16) DEFAULT '''' NOT NULL,
        ORDERNO    VARCHAR(64) DEFAULT '''' NOT NULL,
        CREATETM   TIMESTAMP NOT NULL WITH DEFAULT CURRENT TIMESTAMP
    ) IN EMP_TABLESPACE';
	EXECUTE IMMEDIATE PISQL;
	
END IF;
END;

CALL LL_STATUSRPT();
CALL DELPROC('LL_STATUSRPT');

DROP PROCEDURE "DELPROC";

BEGIN ATOMIC
DECLARE STR1 VARCHAR(20);
IF NOT EXISTS (SELECT * FROM LF_THIR_MENUCONTROL WHERE MENU_NUM=28) THEN
	INSERT INTO LF_THIR_MENUCONTROL(TID,MENU_NUM,TITLE,PRI_MENU,PRI_ORDER) VALUES(101, 28,'企业流量',88,1600);
	INSERT INTO LF_THIR_MENUCONTROL(TID,MENU_NUM,TITLE,PRI_MENU,PRI_ORDER) VALUES(102, 28,'企业流量',89,1700);
	INSERT INTO LF_THIR_MENUCONTROL(TID,MENU_NUM,TITLE,PRI_MENU,PRI_ORDER) VALUES(103, 28,'企业流量',90,1800);
	INSERT INTO LF_THIR_MENUCONTROL(TID,MENU_NUM,TITLE,PRI_MENU,PRI_ORDER) VALUES(104, 28,'企业流量',91,1900);
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3000') THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3000,88,1,'查看','6666-1000-0','流量套餐订购','流量订购','6666-1000','/ll_flowOrder.htm');
END IF; 


IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3001')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3001,88,1,'查看','6666-1100-0','流量套餐同步','流量订购','6666-1100','/ll_flowSynchronize.htm');
END IF;



IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3002')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3002,89,1,'查看','6666-1200-0','套餐订购详情','数据查询','6666-1200','/ll_orderDetails.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3003')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3003,89,1,'查看','6666-1300-0','套餐订购任务查询','数据查询','6666-1300','/ll_packageOrderQuest.htm');
END IF;


IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3004')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3004,89,1,'查看','6666-1400-0','套餐订购历史查询','数据查询','6666-1400','/ll_orderHistoryQuest.htm');
END IF;


IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3005')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3005,89,1,'查看','6666-1500-0','短信提醒下行记录','数据查询','6666-1500','/ll_downRecord.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3006')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3006,89,1,'查看','6666-1600-0','短信提醒任务查询','数据查询','6666-1600','/ll_smsTaskQuest.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3007')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3007,89,1,'查看','6666-1700-0','短信提醒历史查询','数据查询','6666-1700','/ll_smsHistoryQuest.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3008')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3008,90,1,'查看','6666-1800-0','套餐订购统计报表','统计报表','6666-1800','/ll_orderReport.htm');
END IF;


IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3009')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3009,90,1,'查看','6666-1900-0','操作员统计报表','统计报表','6666-1900','/ll_operatorReport.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3010')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3010,90,1,'查看','6666-2000-0','机构统计报表','统计报表','6666-2000','/ll_mechanismReport.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3011')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3011,91,1,'查看','6666-2100-0','账号配置','账号管理','6666-2100','/ll_accountManage.htm');
END IF;

IF NOT EXISTS (SELECT * FROM LF_PRIVILEGE WHERE PRIVILEGE_ID = '3012')
THEN
	INSERT INTO LF_PRIVILEGE(PRIVILEGE_ID,RESOURCE_ID,OPERATE_ID,COMMENTS,PRIV_CODE,MENUNAME,MODNAME,MENUCODE,MENUSITE) VALUES(3012,8,1,'查看','1350-1260-0','流量审核','审批管理','1350-1260','/ll_flowReview.htm');
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3000')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3000);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3000);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3000);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3001')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3001);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3001);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3001);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3002')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3002);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3002);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3002);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3003')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3003);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3003);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3003);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3004')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3004);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3004);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3004);
END IF;


IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3005')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3005);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3005);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3005);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3006')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3006);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3006);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3006);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3007')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3007);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3007);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3007);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3008')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3008);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3008);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3008);
END IF;

IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3009')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3009);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3009);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3009);
END IF;


IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3010')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3010);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3010);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3010);
END IF;


IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3011')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3011);   
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3011);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3011);
END IF;


IF NOT EXISTS (SELECT *  FROM LF_IMPOWER WHERE PRIVILEGE_ID = '3012')
THEN
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(1,3012);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(2,3012);
	INSERT INTO LF_IMPOWER(ROLE_ID,PRIVILEGE_ID) VALUES(4,3012);
END IF;

IF NOT EXISTS (SELECT * FROM LF_REVIEWSWITCH WHERE Info_Type = 7 )
THEN
	Insert into LF_REVIEWSWITCH(Switch_Type,Msg_Count,Info_Type,Corp_Code) values(1,2,7,100001);
END IF;

END;

UPDATE LF_THIR_MENUCONTROL SET ZH_TW_TITLE = '企I流量',ZH_HK_TITLE = 'Enterprise Data' WHERE PRI_MENU IN (88,89,90,91);
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '流量套餐' ,ZH_HK_MENUNAME = 'Data plan order' , ZH_TW_MODNAME = '流量' , ZH_HK_MODNAME = 'Data ordering'  WHERE PRIVILEGE_ID = 3000;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '流量套餐同步' ,ZH_HK_MENUNAME = 'Synchronization' , ZH_TW_MODNAME = '流量' , ZH_HK_MODNAME = 'Data ordering' WHERE PRIVILEGE_ID = 3001;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '套餐情' ,ZH_HK_MENUNAME = 'Detail of order' , ZH_TW_MODNAME = '查' , ZH_HK_MODNAME = 'Data query' WHERE PRIVILEGE_ID = 3002;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '套餐任詹樵' ,ZH_HK_MENUNAME = 'Order task' , ZH_TW_MODNAME = '查' , ZH_HK_MODNAME = 'Data query' WHERE PRIVILEGE_ID = 3003;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '套餐v史查' ,ZH_HK_MENUNAME = 'History of order' , ZH_TW_MODNAME = '查' , ZH_HK_MODNAME = 'Data query' WHERE PRIVILEGE_ID = 3004;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '短信提醒下行' ,ZH_HK_MENUNAME = 'SMS reminder record' , ZH_TW_MODNAME = '查' , ZH_HK_MODNAME = 'Data query' WHERE PRIVILEGE_ID = 3005;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '套餐y蟊' ,ZH_HK_MENUNAME = ' Data plan statistics' , ZH_TW_MODNAME = 'y蟊' , ZH_HK_MODNAME = 'Statistical report' WHERE PRIVILEGE_ID = 3008;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '操作Ty蟊' ,ZH_HK_MENUNAME = 'Operator statistics' , ZH_TW_MODNAME = 'y蟊' , ZH_HK_MODNAME = 'Statistical report' WHERE PRIVILEGE_ID = 3009;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = 'Cy蟊' ,ZH_HK_MENUNAME = 'Organization statistics' , ZH_TW_MODNAME = 'y蟊' , ZH_HK_MODNAME = 'Statistical report' WHERE PRIVILEGE_ID = 3010;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '~配置' ,ZH_HK_MENUNAME = 'Settings ' , ZH_TW_MODNAME = '~管理' , ZH_HK_MODNAME = 'Account' WHERE PRIVILEGE_ID = 3011;
UPDATE LF_PRIVILEGE SET  ZH_TW_COMMENTS = '查看' , ZH_HK_COMMENTS = 'View' ,ZH_TW_MENUNAME = '流量核' ,ZH_HK_MENUNAME = 'Data Audit' , ZH_TW_MODNAME = '批管理' , ZH_HK_MODNAME = 'Approval' WHERE PRIVILEGE_ID = 3012;
COMMIT;

UPDATE LF_THIR_MENUCONTROL SET PRI_ORDER = 370 WHERE TID = 101;
UPDATE LF_THIR_MENUCONTROL SET PRI_ORDER = 375 WHERE TID = 102;
UPDATE LF_THIR_MENUCONTROL SET PRI_ORDER = 380 WHERE TID = 103;
UPDATE LF_THIR_MENUCONTROL SET PRI_ORDER = 385 WHERE TID = 104;

COMMIT;

--增加版本信息
BEGIN ATOMIC 
DECLARE VERSIONSTR VARCHAR(32);
DECLARE DBVERSIONSTR VARCHAR(32);
DECLARE WBSVERSIONSTR VARCHAR(32);
DECLARE SPGATEVERSIONSTR VARCHAR(32);
DECLARE NUMSTR INT;
DECLARE TOTALSTR INT;
SET VERSIONSTR = '7.0.0.395';
SET DBVERSIONSTR='7.00';
SET WBSVERSIONSTR='8.4.10.163';
SET SPGATEVERSIONSTR='6.1.23.316';
SET NUMSTR=1;
SET TOTALSTR=1;
--EMP产品版本记录
IF NOT EXISTS (SELECT * FROM LF_VERSION WHERE PRODUCT_ID=1000 AND PROCESS_ID=1000) THEN
--EMP-WEB
INSERT INTO LF_VERSION(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO)
VALUES(1000,1000,VERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'EMP-WEB');
ELSE
UPDATE LF_VERSION SET UPDATETIME=CURRENT TIMESTAMP,VERSION=VERSIONSTR WHERE PRODUCT_ID=1000 AND PROCESS_ID=1000;
END IF;

IF NOT EXISTS (SELECT * FROM LF_VERSION WHERE PRODUCT_ID=1000 AND PROCESS_ID=2000) THEN
--EMP_GATEWAY
INSERT INTO LF_VERSION(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO)
VALUES(1000,2000,WBSVERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'EMP_GATEWAY');
ELSE
UPDATE LF_VERSION SET UPDATETIME=CURRENT TIMESTAMP,VERSION=WBSVERSIONSTR WHERE PRODUCT_ID=1000 AND PROCESS_ID=2000;
END IF;

IF NOT EXISTS (SELECT * FROM LF_VERSION WHERE PRODUCT_ID=1000 AND PROCESS_ID=3000) THEN
--SMT_SPGATE
INSERT INTO LF_VERSION(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO)
VALUES(1000,3000,SPGATEVERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'SMT_SPGATE');
ELSE
UPDATE LF_VERSION SET UPDATETIME=CURRENT TIMESTAMP,VERSION=SPGATEVERSIONSTR WHERE PRODUCT_ID=1000 AND PROCESS_ID=3000;
END IF;
--EMP产品版本历史记录      
IF NOT EXISTS (SELECT * FROM LF_VERSION_HIS WHERE VERSION=VERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=1000) THEN
--EMP-WEB
INSERT INTO LF_VERSION_HIS(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO,ISRELEASE,VERSIONINFO)
VALUES(1000,1000,VERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'EMP-WEB',1,'1.新增企业流量');
ELSE
UPDATE LF_VERSION_HIS SET UPDATETIME=CURRENT TIMESTAMP,ISRELEASE=1,VERSIONINFO='1.新增企业流量' WHERE VERSION=VERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=1000;
END IF;

IF NOT EXISTS (SELECT * FROM LF_VERSION_HIS WHERE VERSION=WBSVERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=2000) THEN
--EMP_GATEWAY
INSERT INTO LF_VERSION_HIS(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO)
VALUES(1000,2000,WBSVERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'EMP_GATEWAY');
ELSE
UPDATE LF_VERSION_HIS SET UPDATETIME=CURRENT TIMESTAMP WHERE VERSION=WBSVERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=2000;
END IF;

IF NOT EXISTS (SELECT * FROM LF_VERSION_HIS WHERE VERSION=SPGATEVERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=3000) THEN
--SMT_SPGATE
INSERT INTO LF_VERSION_HIS(PRODUCT_ID,PROCESS_ID,VERSION,UPDATETIME,CREATETIME,MEMO)
VALUES(1000,3000,SPGATEVERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,'SMT_SPGATE');
ELSE
UPDATE LF_VERSION_HIS SET UPDATETIME=CURRENT TIMESTAMP WHERE VERSION=SPGATEVERSIONSTR AND PRODUCT_ID=1000 AND PROCESS_ID=3000;
END IF;

IF NOT EXISTS (SELECT * FROM LF_DB_SCRIPT WHERE VERSION=DBVERSIONSTR) THEN
--EMP产品数据库版本信息表
INSERT INTO LF_DB_SCRIPT(VERSION,UPDATETIME,CREATETIME,CURRENT_NO,TOTAL,STATE,MEMO)
VALUES(DBVERSIONSTR,CURRENT TIMESTAMP,CURRENT TIMESTAMP,NUMSTR,TOTALSTR,2,'网关包更改');
ELSE
UPDATE LF_DB_SCRIPT SET STATE=2,UPDATETIME=CURRENT TIMESTAMP WHERE  VERSION=DBVERSIONSTR AND CURRENT_NO=NUMSTR AND TOTAL=TOTALSTR;
END IF;
END ;
--------------------V6.33-V6.35END-----------------  